{%- liquid
  assign src = img.preview_image
  assign ratio = ratio | default: src.aspect_ratio
  assign width = width | default: 450
  assign height = width | divided_by: ratio | ceil
  assign crop = crop | default: 'center'
  assign lazy = lazy | default: true
  assign img_class = img_class | default: false
  assign picture_class = picture_class | default: false
-%}

<picture {% if picture_class %}class="{{ picture_class }}"{% endif %}>
  <img src="{{ src | image_url: width: width, height: height, crop: crop }}" width="{{ width }}" height="{{ height }}" alt="{{ img.alt | escape }}" {% if lazy %} loading="lazy"{% endif %} {% if img_class %} class="{{ img_class }}"{% endif %}>
</picture>