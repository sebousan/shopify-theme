{%- liquid
  assign src = img.preview_image
  assign ratio = ratio | default: src.aspect_ratio
  assign width = width | default: 450
  assign height = width | divided_by: ratio | ceil
-%}

<picture>
  <img src="{{ src | image_url: width: width, height: height }}" width="{{ width }}" height="{{ height }}" alt="{{ img.alt | escape }}" loading="lazy">
</picture>